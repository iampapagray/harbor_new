{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useUnityLoader = exports.Status = void 0;\n\nvar react_1 = require(\"react\");\n\nvar Status;\n\n(function (Status) {\n  Status[\"Idle\"] = \"Idle\";\n  Status[\"Loading\"] = \"Loading\";\n  Status[\"Loaded\"] = \"Loaded\";\n  Status[\"Error\"] = \"Error\";\n})(Status = exports.Status || (exports.Status = {}));\n/**\n * Hook to embed a Unity Loader script.\n * @param src The source of the unity loader\n * @returns a hook that returns the status of the loader\n */\n\n\nfunction useUnityLoader(src) {\n  var _a = (0, react_1.useState)(src ? Status.Loading : Status.Idle),\n      status = _a[0],\n      setStatus = _a[1]; // Effect hook will be invoked when the src changes.\n\n\n  (0, react_1.useEffect)(function () {\n    if (src === null) {\n      setStatus(Status.Idle);\n      return;\n    } // Fetch existing script element by src\n    // It may have been added by another instance of this hook\n\n\n    var script = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n\n    if (script === null) {\n      // Create script\n      script = document.createElement(\"script\");\n      script.src = src;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\"); // Add script to document body\n\n      document.body.appendChild(script); // Store status in attribute on script\n      // This can be read by other instances of this hook\n\n      var setAttributeFromEvent = function setAttributeFromEvent(event) {\n        script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", event.type === \"load\" ? \"ready\" : \"error\");\n      };\n\n      script.addEventListener(\"load\", setAttributeFromEvent);\n      script.addEventListener(\"error\", setAttributeFromEvent);\n    } else {\n      // Grab existing script status from attribute and set to state.\n      setStatus(script.getAttribute(\"data-status\") === \"ready\" ? Status.Loaded : Status.Error);\n    } // Script event handler to update status in state\n    // Note: Even if the script already exists we still need to add\n    // event handlers to update the state for *this* hook instance.\n\n\n    var setStateFromEvent = function setStateFromEvent(event) {\n      setStatus(event.type === \"load\" ? Status.Loaded : Status.Error);\n    }; // Add event listeners\n\n\n    script.addEventListener(\"load\", setStateFromEvent);\n    script.addEventListener(\"error\", setStateFromEvent); // Remove event listeners on cleanup\n\n    return function () {\n      if (script) {\n        script.removeEventListener(\"load\", setStateFromEvent);\n        script.removeEventListener(\"error\", setStateFromEvent);\n        document.body.removeChild(script);\n      }\n    };\n  }, [src] // Only re-run effect if script src changes\n  );\n  return status;\n}\n\nexports.useUnityLoader = useUnityLoader;","map":{"version":3,"names":["Object","defineProperty","exports","value","useUnityLoader","Status","react_1","require","src","_a","useState","Loading","Idle","status","setStatus","useEffect","script","document","querySelector","concat","createElement","async","setAttribute","body","appendChild","setAttributeFromEvent","event","type","addEventListener","getAttribute","Loaded","Error","setStateFromEvent","removeEventListener","removeChild"],"sources":["/Users/magmar/dev/harborsite/harborapp/node_modules/react-unity-webgl/distribution/hooks/use-unity-loader.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useUnityLoader = exports.Status = void 0;\nvar react_1 = require(\"react\");\nvar Status;\n(function (Status) {\n    Status[\"Idle\"] = \"Idle\";\n    Status[\"Loading\"] = \"Loading\";\n    Status[\"Loaded\"] = \"Loaded\";\n    Status[\"Error\"] = \"Error\";\n})(Status = exports.Status || (exports.Status = {}));\n/**\n * Hook to embed a Unity Loader script.\n * @param src The source of the unity loader\n * @returns a hook that returns the status of the loader\n */\nfunction useUnityLoader(src) {\n    var _a = (0, react_1.useState)(src ? Status.Loading : Status.Idle), status = _a[0], setStatus = _a[1];\n    // Effect hook will be invoked when the src changes.\n    (0, react_1.useEffect)(function () {\n        if (src === null) {\n            setStatus(Status.Idle);\n            return;\n        }\n        // Fetch existing script element by src\n        // It may have been added by another instance of this hook\n        var script = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n        if (script === null) {\n            // Create script\n            script = document.createElement(\"script\");\n            script.src = src;\n            script.async = true;\n            script.setAttribute(\"data-status\", \"loading\");\n            // Add script to document body\n            document.body.appendChild(script);\n            // Store status in attribute on script\n            // This can be read by other instances of this hook\n            var setAttributeFromEvent = function (event) {\n                script === null || script === void 0 ? void 0 : script.setAttribute(\"data-status\", event.type === \"load\" ? \"ready\" : \"error\");\n            };\n            script.addEventListener(\"load\", setAttributeFromEvent);\n            script.addEventListener(\"error\", setAttributeFromEvent);\n        }\n        else {\n            // Grab existing script status from attribute and set to state.\n            setStatus(script.getAttribute(\"data-status\") === \"ready\"\n                ? Status.Loaded\n                : Status.Error);\n        }\n        // Script event handler to update status in state\n        // Note: Even if the script already exists we still need to add\n        // event handlers to update the state for *this* hook instance.\n        var setStateFromEvent = function (event) {\n            setStatus(event.type === \"load\" ? Status.Loaded : Status.Error);\n        };\n        // Add event listeners\n        script.addEventListener(\"load\", setStateFromEvent);\n        script.addEventListener(\"error\", setStateFromEvent);\n        // Remove event listeners on cleanup\n        return function () {\n            if (script) {\n                script.removeEventListener(\"load\", setStateFromEvent);\n                script.removeEventListener(\"error\", setStateFromEvent);\n                document.body.removeChild(script);\n            }\n        };\n    }, [src] // Only re-run effect if script src changes\n    );\n    return status;\n}\nexports.useUnityLoader = useUnityLoader;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}